<!DOCTYPE html>
<html lang="kr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="a tiny blog by gyunam park.">
  <meta name="author" content="Gyunam Park">
  <!-- OPEN GRAPH -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="gyunam.blog">
  <!-- 파비콘(favicon) -->
  <link rel="icon" href="/resources/favicon/favicon.ico" type="image/x-icon">
  <!-- canonical URL -->
  <link rel="canonical" href="https://www.gyunam.blog/">
  
  <link rel="stylesheet" href="/styles.css">
  <title>gyunam.blog</title>
</head>
<body>
  <header>
  <div class="header-container">
    <a class="header-title" href="/">gyunam.blog</a>
    <nav class="header-nav">
      <ul class="header-tag-list">
        <li class="header-tag-list-item">
          <a href="/tags/11ty/">11ty (1)</a>
        </li>
        <li class="header-tag-list-item">
          <a href="/tags/express/">express (6)</a>
        </li>
        <li class="header-tag-list-item">
          <a href="/tags/weekly/">weekly (12)</a>
        </li>
        <li class="header-tag-list-item">
          <a href="/tags/sprinter/">sprinter (2)</a>
        </li>
        <li class="header-tag-list-item">
          <a href="/tags/toy/">toy (1)</a>
        </li>
      </ul>
      <ul class="header-tag-list">
        <li class="header-tag-list-item">
          <a href="/tags/git/">git (1)</a>
        </li>
        <li class="header-tag-list-item">
          <a href="/tags/shell/">shell (1)</a>
        </li>
      </ul>
    </nav>
  </div>
</header>
  <main>
    
  <article>
    <h1>[weekly] [nb] 웹 개발 시작하기(5)</h1>

    
      <p class="subtitle">자바스크립트에서 모듈을 사용하는 이유에 대해 설명해 주세요.</p>
    

    <h2>모듈(module)</h2>
<p>이 모듈(module) 이란 용어는 프로그래밍에서 굉장히 오래전부터 사용되었다.</p>
<h3>간단한 역사</h3>
<h4>1960년 ~ 1970년</h4>
<p>algol, simula, modula 등의 초창기 객체지향 패러다임 언어에서 사용되었다.</p>
<p>특히 modula 는 프로그래밍 언어 이름에도 module 이 들어가는 만큼, 가장 적극적으로 module 이란 용어를 사용하고 개념을 정립했다.</p>
<h4>1980년 ~ 1990년</h4>
<p>ada, pascal 에서도 module 의 개념이 적극적으로 도입되고, 이 시기 부터 거의 대부분의 프로그래밍 언어가 이 module 이라는 개념을 사용하기 시작한다.</p>
<p>프로그래밍의 황금기를 연 c 언어 역시 공식적으로 module 개념을 언급하지는 않지만, module 의 개념을 사용한다. .h(헤더) 와 .c(소스) 파일을 나누는 것이 바로 그것.</p>
<p>황금기의 절정을 연 pyhon 은 import 구문으로 module 을 명확하게 사용한다.</p>
<h3>모듈의 의의</h3>
<p>이렇게 많은 프로그래밍 언어들이 module 이라 개념을 사용하게 된 것은 당연 <strong>필요했기</strong> 때문이다.</p>
<p>javascript 에서는 아래의 큰 이유들이 존재한다.</p>
<h4>전역 변수 충돌 방지</h4>
<p>javascript 는 원래 웹 개발에 사용되기 위해서 만들어졌다는 것을 기억해야 한다.</p>
<p><strong>안 좋은 예</strong></p>
<pre class="language-html"><code class="language-html">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> <span class="token constant">PI</span> <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> <span class="token constant">PI</span> <span class="token operator">=</span> <span class="token string">'3.14'</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">+</span> <span class="token string">' and '</span> <span class="token operator">+</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

</code></pre>
<p>javascript 는 &lt;script&gt; 태그로 html 파일 내부에 작성할 수 있다.</p>
<p>이 방법은 필요할 때 마다 javascript 를 작성하고 적용할 수 있는 장점이 있는 반면, 변수는 전역(global) 로 동작한다.</p>
<p>module 로 코드를 작성하면 변수 충돌을 방지 할 수 있다.</p>
<p><strong>좋은 예</strong></p>
<pre class="language-javascript"><code class="language-javascript">
<span class="token comment">// math.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">PI</span> <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
<h4>코드 분리</h4>
<p>기능 또는 객체별로 코드를 분리할 수 있기 때문에 하나의 코드 파일에 적정 수의 코드를 유지할 수 있다.</p>
<p><strong>안 좋은 예</strong></p>
<pre class="language-javascript"><code class="language-javascript">
<span class="token comment">// index.js</span>
<span class="token keyword">function</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token parameter">username<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> username <span class="token operator">===</span> <span class="token string">'admin'</span> <span class="token operator">&amp;&amp;</span> password <span class="token operator">===</span> <span class="token string">'1234'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token string">'admin'</span><span class="token punctuation">,</span> <span class="token string">'1234'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Welcome!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>지금 코드는 짧으니 괜찮아 보인다.</p>
<p>하지만 login 에 이어서 logout, create, update.. 등등의 기능들이 모두 하나의 파일에 들어있다고 생각해보자.</p>
<p>적게는 수백 줄, 많게는 수천 줄까지 가는 건 어렵지 않을 것이다.</p>
<p>이렇게 되면, 어떤 문제가 발생했을 때, 문제가 발생한 부분을 찾는 것도 어렵거니와, 이 파일 안에 어떤 변수나 함수가 또 연관되어있는지 찾는게 어렵다.</p>
<p>규모가 큰 게임의 경우 코드의 길이를 다 합치면 억 단위 까지도 가는 경우가 있으니, 그야말로 백사막에서 소금 한 조각 찾기라 할 수 있다.</p>
<p><strong>좋은 예</strong></p>
<pre class="language-javascript"><code class="language-javascript">
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token parameter">username<span class="token punctuation">,</span> password</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> username <span class="token operator">===</span> <span class="token string">'admin'</span> <span class="token operator">&amp;&amp;</span> password <span class="token operator">===</span> <span class="token string">'1234'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
<p>이것도 굳이 면밀히 따지자면 좋다고 말할 수 없지만, 어쨋든 목적은 코드 분리기 때문에 괜찮다!</p>
<h4>재사용성</h4>
<p>아까 위에서 분리하는 개념에서 이어진다.</p>
<p>기능 혹은 객체 별로 분리한 것을 다른 곳에서 계속 해서 사용할 수 있다.</p>
<pre class="language-javascript"><code class="language-javascript">
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">formatDate</span><span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> date<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'T'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
<p>즉, javascript 에서 <strong>'뭔가 똑같은 코드를 두 번이상 작성하네?'</strong> 싶으면 죄다 빼내서 분리하면 된다.</p>
<p>그래서 가능한 하나의 함수는 하나의 기능만 동작하도록 유지하는 것이 좋다.</p>
<h4>의존성 명확한 가독성</h4>
<p>import 구문이 있고 없고의 차이는 굉장히 크다.</p>
<p><strong>없을 때</strong></p>
<pre class="language-html"><code class="language-html">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!-- 수 백개의 html 코드 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

</code></pre>
<p>저 두 javascript 사이에 수백 개의 html 코드가 있다고 생각해보자.</p>
<p>대체 어디서 정의된 add() 란 함수를 사용한건지 알 수가 없다.</p>
<p>이 이유로 상기했던 전역 변수 충돌이 발생할 수 있는 것이다. add() 가 만들어져있는지 모르고 또 만들 수도 있기 때문!</p>
<p><strong>있을 때</strong></p>
<pre class="language-javascript"><code class="language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> add <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./add.mjs'</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span>
</code></pre>
<p>javascript 에 명확하게 포함한다(import) 라는 구문이 들어가 있기 때문에 훨씬 가독성이 좋아진다.</p>
<p>add() 함수를 수정해야하는 상황이 오면, add.mjs 를 참고해야겠구나 라고 추측하기가 쉽다.</p>
<h4>최적화</h4>
<p>사실 이 최적화라는 것은 번들링(bundling)을 진행하는 속도와 그 결과물을 서비스를 올릴 때 리소스 용량 이 줄어드는 것을 보면 체감이 된다.</p>
<p>그 밖에 최적화라 해봐야 하나의 모듈에 비슷한 계열의 기능들을 묶어서 쓸 수 있다는 점?</p>
<pre class="language-javascript"><code class="language-javascript">
<span class="token comment">// math.mjs</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">subtract</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">-</span> b <span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">*</span> b <span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">/</span> b <span class="token punctuation">}</span>

</code></pre>
<pre class="language-javascript"><code class="language-javascript">
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Maths <span class="token keyword">from</span> <span class="token string">'./math.js'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Maths<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre>
<h2>마무리</h2>
<p>내가 javascript 를 배워서 쓸 때엔 당연히 있는 기능이라 써서 소중함을 몰랐다.</p>
<p>module 이라는 기능이 없는 상태에서 코드를 작성해보니, 불편함을 바로 체감할 수 있었다.</p>
<p>아주 간단한 express 코드로 외부 api 요청, 응답만 할 때 예외처리만 섞어도 코드는 수백 줄이 넘어간다.</p>
<p>그리고 특정 변수, 함수를 찾기 위해서 한 코드 내에서 올라갔다 내려갔다 하는 것이 엄청난 고역이었다.</p>

  </article>

  </main>
  <footer>
  <p>&copy; gyunam park</p>
</footer>
</body>
</html>